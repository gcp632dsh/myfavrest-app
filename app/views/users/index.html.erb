<% provide(:title, "ユーザ一覧") %>
<div class="container userwrapper">
    <h3><i class="fas fa-user"></i> ユーザ一覧</h3>
    <div class="user-search">
        <%= search_form_for @search, url: users_path do |f| %>
        <div class="row">
            <div class="form-group col-5">
                <%= f.search_field :username_cont, class:"form-control" ,placeholder: "ユーザー名で探す"  %>
            </div>
            <div class="form-group col-3">
                <%= f.collection_select( :work_idt_eq_any, @code.where(code_id: "6"), :code, :name, {include_blank: '勤務先業界'}, {class: "form-control"}) %>
            </div>
            <div class="form-group col-3">
                <%= f.collection_select( :work_ocpn_eq_any, @code.where(code_id: "7"), :code, :name, {include_blank: '職種'}, {class: "form-control"}) %>
            </div>
            <div class="form-group col-1">
                <%= f.submit "検索", class: 'sbtn' %>
            </div>
        </div>
        <% end %>
    </div>
    <div class="center">
        <%= paginate @users %>
    </div>
    <div class="row userindex">
        <% @users.each do |user| %>
        <div class="user-info col-4">
            <% if user.image.attached? %>
                <%= link_to user.image, user_path(user), class:"user-icon" %>
            <% else %>
                <%= link_to user_path(user) do %>
                    <%= image_tag ("no_image.png"), class:"user-icon" %>
                <% end %>
            <% end %>
            &nbsp<%= user.username %>
            <%= render partial: 'shared/follow', locals: {user: user} %>
            <br>
        </div>
        <% end %>
    </div>
    <div class="center">
        <%= paginate @users %>
    </div>
</div>
